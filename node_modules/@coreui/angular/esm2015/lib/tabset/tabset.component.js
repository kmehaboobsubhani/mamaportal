import { Component, ContentChild, ContentChildren, ElementRef, EventEmitter, HostBinding, Input, Output, Renderer2, } from '@angular/core';
import { TabsetService } from './tabset.service';
import { TabComponent } from './tab/tab.component';
import { TabPaneComponent } from './tab-pane/tab-pane.component';
import { TabListComponent } from './tab-list/tab-list.component';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './tabset.service';

const _c0 = ["*"];
export class TabsetComponent {
    constructor(hostElement, renderer, tabsetService) {
        this.hostElement = hostElement;
        this.renderer = renderer;
        this.tabsetService = tabsetService;
        this._activeTab = 0;
        this._tabsArray = [];
        this.variant = 'tabs';
        this.fade = true;
        this.boxed = false;
        this.activeTabChange = new EventEmitter();
        this.host = this.hostElement.nativeElement;
    }
    set activeTab(index) {
        this._activeTab = index >= 0 ? index : this._activeTab;
    }
    get activeTab() {
        return this._activeTab;
    }
    ngOnInit() {
        if (typeof this.boxed === 'string') {
            this.renderer.addClass(this.host, `nav-tabs-boxed-${this.boxed}`);
        }
        this.activeTabSubscribe();
    }
    ngOnDestroy() {
        this.activeTabUnsubscribe();
    }
    ngAfterContentInit() {
        this.tabList.variant = this.variant;
        this.tabList.vertical = this.vertical;
        this.tabList.fill = this.fill;
        this.tabList.justified = this.justified;
        this._tabsArray = this.tabs.toArray();
        if (this.tabs.length) {
            this._selectedTab = this.tabs.length - 1 < this.activeTab ? this.tabs.first : this._tabsArray[this.activeTab];
        }
        this.tabs.forEach((item, index) => {
            item.indexKey = index;
        });
        this.panes.forEach((item, index) => {
            item.indexKey = index;
        });
        this.tabsetService.setActiveTab(this._selectedTab);
        this.setActiveTab(this._selectedTab);
    }
    ngAfterContentChecked() {
    }
    ngOnChanges(changes) {
    }
    setActiveTab(tab = this._selectedTab) {
        this.activeTab = tab.indexKey;
        if (!tab.disabled) {
            tab.active = true;
            this.tabsetService.setActiveTab(tab);
            this.activeTabChange.emit(this.activeTab);
        }
    }
    activeTabSubscribe() {
        this.activeTabSubscription = this.tabsetService.activeTab$.subscribe((activeTab) => {
        });
    }
    activeTabUnsubscribe() {
        this.activeTabSubscription.unsubscribe();
    }
}
TabsetComponent.ɵfac = function TabsetComponent_Factory(t) { return new (t || TabsetComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.TabsetService)); };
TabsetComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TabsetComponent, selectors: [["c-tabset"]], contentQueries: function TabsetComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, TabListComponent, 3);
        ɵngcc0.ɵɵcontentQuery(dirIndex, TabComponent, 1);
        ɵngcc0.ɵɵcontentQuery(dirIndex, TabPaneComponent, 1);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tabList = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tabs = _t);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.panes = _t);
    } }, hostVars: 2, hostBindings: function TabsetComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("nav-tabs-boxed", ctx.boxed);
    } }, inputs: { variant: "variant", fade: "fade", boxed: "boxed", activeTab: "activeTab", fill: "fill", justified: "justified", vertical: "vertical" }, outputs: { activeTabChange: "activeTabChange" }, features: [ɵngcc0.ɵɵProvidersFeature([TabsetService]), ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c0, decls: 1, vars: 0, template: function TabsetComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵprojection(0);
    } }, styles: [""] });
TabsetComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 },
    { type: TabsetService }
];
TabsetComponent.propDecorators = {
    fill: [{ type: Input }],
    justified: [{ type: Input }],
    variant: [{ type: Input }],
    fade: [{ type: Input }],
    vertical: [{ type: Input }],
    activeTab: [{ type: Input }],
    boxed: [{ type: HostBinding, args: ['class.nav-tabs-boxed',] }, { type: Input }],
    activeTabChange: [{ type: Output }],
    tabList: [{ type: ContentChild, args: [TabListComponent, { static: true },] }],
    tabs: [{ type: ContentChildren, args: [TabComponent, { descendants: true },] }],
    panes: [{ type: ContentChildren, args: [TabPaneComponent, { descendants: true },] }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TabsetComponent, [{
        type: Component,
        args: [{
                selector: 'c-tabset',
                template: "<ng-content></ng-content>\n",
                providers: [TabsetService],
                styles: [""]
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc1.TabsetService }]; }, { variant: [{
            type: Input
        }], fade: [{
            type: Input
        }], boxed: [{
            type: HostBinding,
            args: ['class.nav-tabs-boxed']
        }, {
            type: Input
        }], activeTabChange: [{
            type: Output
        }], activeTab: [{
            type: Input
        }], fill: [{
            type: Input
        }], justified: [{
            type: Input
        }], vertical: [{
            type: Input
        }], tabList: [{
            type: ContentChild,
            args: [TabListComponent, { static: true }]
        }], tabs: [{
            type: ContentChildren,
            args: [TabComponent, { descendants: true }]
        }], panes: [{
            type: ContentChildren,
            args: [TabPaneComponent, { descendants: true }]
        }] }); })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFic2V0LmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29yZXVpLWFuZ3VsYXIvc3JjL2xpYi90YWJzZXQvdGFic2V0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBR0wsU0FBUyxFQUFFLFlBQVksRUFDdkIsZUFBZSxFQUFFLFVBQVUsRUFDM0IsWUFBWSxFQUFFLFdBQVcsRUFDekIsS0FBSyxFQUdMLE1BQU0sRUFDSyxTQUFTLEdBQ3JCLE1BQU0sZUFBZSxDQUFDO0FBR3ZCLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUMvQyxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDakQsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sK0JBQStCLENBQUM7QUFDL0QsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sK0JBQStCLENBQUM7Ozs7O0FBUS9ELE1BQU0sT0FBTyxlQUFlO0FBQUksSUFnQzlCLFlBQ1UsV0FBdUIsRUFDdkIsUUFBbUIsRUFDbkIsYUFBNEI7QUFDcEMsUUFIUSxnQkFBVyxHQUFYLFdBQVcsQ0FBWTtBQUNuQyxRQUFZLGFBQVEsR0FBUixRQUFRLENBQVc7QUFDL0IsUUFBWSxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtBQUN2QyxRQWxDUyxlQUFVLEdBQUcsQ0FBQyxDQUFDO0FBQ3hCLFFBQ1MsZUFBVSxHQUFHLEVBQUUsQ0FBQztBQUN6QixRQUlVLFlBQU8sR0FBcUIsTUFBTSxDQUFDO0FBQzdDLFFBQVUsU0FBSSxHQUFHLElBQUksQ0FBQztBQUN0QixRQVVVLFVBQUssR0FBNkMsS0FBSyxDQUFDO0FBRW5FLFFBQVksb0JBQWUsR0FBeUIsSUFBSSxZQUFZLEVBQUUsQ0FBQztBQUV2RSxRQVlJLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUM7QUFDOUMsSUFBQyxDQUFDO0FBRUgsSUEzQkUsSUFDSSxTQUFTLENBQUMsS0FBYTtBQUM1QixRQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO0FBQzFELElBQUMsQ0FBQztBQUNGLElBQUMsSUFBSSxTQUFTO0FBQ2QsUUFBRyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7QUFDMUIsSUFBQyxDQUFDO0FBQ0YsSUFvQkMsUUFBUTtBQUNULFFBQUcsSUFBSSxPQUFPLElBQUksQ0FBQyxLQUFLLEtBQUssUUFBUSxFQUFFO0FBQ3ZDLFlBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxrQkFBa0IsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7QUFDdkUsU0FBSTtBQUNKLFFBQUcsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7QUFDN0IsSUFBQyxDQUFDO0FBRUgsSUFBRSxXQUFXO0FBQ1osUUFBRyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztBQUMvQixJQUFDLENBQUM7QUFFSCxJQUFFLGtCQUFrQjtBQUNuQixRQUNHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDdkMsUUFBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQ3pDLFFBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztBQUNqQyxRQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7QUFDM0MsUUFBRyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDekMsUUFBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3pCLFlBQUssSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ25ILFNBQUk7QUFDSixRQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFO0FBQ3JDLFlBQUssSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7QUFDM0IsUUFBRyxDQUFDLENBQUMsQ0FBQztBQUNOLFFBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUU7QUFDdEMsWUFBSyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztBQUMzQixRQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ04sUUFBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDdEQsUUFBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN4QyxJQUFDLENBQUM7QUFFSCxJQUFFLHFCQUFxQjtBQUV2QixJQUFFLENBQUM7QUFFSCxJQUNFLFdBQVcsQ0FBQyxPQUFzQjtBQUFLLElBR3ZDLENBQUM7QUFFSCxJQUFFLFlBQVksQ0FBQyxNQUFvQixJQUFJLENBQUMsWUFBWTtBQUNuRCxRQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQUNqQyxRQUNHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFO0FBQ3RCLFlBQUssR0FBRyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7QUFDdkIsWUFBSyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMxQyxZQUFLLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMvQyxTQUFJO0FBQ0osSUFBQyxDQUFDO0FBRUgsSUFBVSxrQkFBa0I7QUFDM0IsUUFBRyxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7QUFDdEYsUUFFRyxDQUFDLENBQUMsQ0FBQztBQUNOLElBQUMsQ0FBQztBQUNGLElBQVMsb0JBQW9CO0FBQzdCLFFBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQzVDLElBQUMsQ0FBQztBQUNGOzZDQTFHQSxTQUFTLFNBQUMsbUJBQ1QsUUFBUSxFQUFFLFVBQVUsbUJBQ3BCLHVDQUFzQyxtQkFFdEMsU0FBUyxFQUFFLENBQUMsYUFBYSxDQUFDO2VBQzNCOzs7Ozs7Ozs7Ozs7Ozt5QkFDSztBQUFFO0FBQTBDLFlBckIvQixVQUFVO0FBQzFCLFlBS1UsU0FBUztBQUFLLFlBSW5CLGFBQWE7QUFBSTtBQUFJO0FBQ1osbUJBaUJkLEtBQUs7QUFBTSx3QkFDWCxLQUFLO0FBQU0sc0JBQ1gsS0FBSztBQUFNLG1CQUNYLEtBQUs7QUFBTSx1QkFDWCxLQUFLO0FBQU0sd0JBRVgsS0FBSztBQUNMLG9CQU1BLFdBQVcsU0FBQyxzQkFBc0IsY0FDbEMsS0FBSztBQUFNLDhCQUVYLE1BQU07QUFBTSxzQkFHWixZQUFZLFNBQUMsZ0JBQWdCLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQVEsbUJBQ3ZELGVBQWUsU0FBQyxZQUFZLEVBQUUsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFO0FBQVEsb0JBQzNELGVBQWUsU0FBQyxnQkFBZ0IsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUU7QUFBTzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFyREEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFHQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQVFBLEFBQUEsQUFBQSxBQUFBLEFBZ0NBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBRkEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBakNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBS0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFXQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFjQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQXpCQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQXFCQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFFQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFHQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQXpHQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQXBCQSxBQUFBLEFBTUEsQUFBQSxBQUlBLEFBQUEsQUFrQkEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBT0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyQ29udGVudENoZWNrZWQsXG4gIEFmdGVyQ29udGVudEluaXQsIEFmdGVyVmlld0NoZWNrZWQsIEFmdGVyVmlld0luaXQsXG4gIENvbXBvbmVudCwgQ29udGVudENoaWxkLFxuICBDb250ZW50Q2hpbGRyZW4sIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlciwgSG9zdEJpbmRpbmcsXG4gIElucHV0LCBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFF1ZXJ5TGlzdCwgUmVuZGVyZXIyLCBTaW1wbGVDaGFuZ2VzLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7U3Vic2NyaXB0aW9ufSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHtUYWJzZXRTZXJ2aWNlfSBmcm9tICcuL3RhYnNldC5zZXJ2aWNlJztcbmltcG9ydCB7VGFiQ29tcG9uZW50fSBmcm9tICcuL3RhYi90YWIuY29tcG9uZW50JztcbmltcG9ydCB7VGFiUGFuZUNvbXBvbmVudH0gZnJvbSAnLi90YWItcGFuZS90YWItcGFuZS5jb21wb25lbnQnO1xuaW1wb3J0IHtUYWJMaXN0Q29tcG9uZW50fSBmcm9tICcuL3RhYi1saXN0L3RhYi1saXN0LmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2MtdGFic2V0JyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RhYnNldC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RhYnNldC5jb21wb25lbnQuc2NzcyddLFxuICBwcm92aWRlcnM6IFtUYWJzZXRTZXJ2aWNlXVxufSlcbmV4cG9ydCBjbGFzcyBUYWJzZXRDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlckNvbnRlbnRDaGVja2VkLCBBZnRlckNvbnRlbnRJbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgT25Jbml0IHtcblxuICBwcml2YXRlIF9hY3RpdmVUYWIgPSAwO1xuICBwcml2YXRlIF9zZWxlY3RlZFRhYjogVGFiQ29tcG9uZW50O1xuICBwcml2YXRlIF90YWJzQXJyYXkgPSBbXTtcbiAgcHJpdmF0ZSBhY3RpdmVUYWJTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICBASW5wdXQoKSBmaWxsOiBib29sZWFuO1xuICBASW5wdXQoKSBqdXN0aWZpZWQ6IGJvb2xlYW47XG4gIEBJbnB1dCgpIHZhcmlhbnQ6ICd0YWJzJyB8ICdwaWxscycgPSAndGFicyc7XG4gIEBJbnB1dCgpIGZhZGUgPSB0cnVlO1xuICBASW5wdXQoKSB2ZXJ0aWNhbDogYm9vbGVhbjtcblxuICBASW5wdXQoKVxuICBzZXQgYWN0aXZlVGFiKGluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLl9hY3RpdmVUYWIgPSBpbmRleCA+PSAwID8gaW5kZXggOiB0aGlzLl9hY3RpdmVUYWI7XG4gIH1cbiAgZ2V0IGFjdGl2ZVRhYigpIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlVGFiO1xuICB9XG4gIEBIb3N0QmluZGluZygnY2xhc3MubmF2LXRhYnMtYm94ZWQnKVxuICBASW5wdXQoKSBib3hlZDogYm9vbGVhbiB8ICdsZWZ0JyB8ICdyaWdodCcgfCAndG9wLXJpZ2h0JyA9IGZhbHNlO1xuXG4gIEBPdXRwdXQoKSBhY3RpdmVUYWJDaGFuZ2U6IEV2ZW50RW1pdHRlcjxudW1iZXI+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIC8vIEBDb250ZW50Q2hpbGRyZW4oVGFiQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlLCByZWFkOiBFbGVtZW50UmVmIH0pIHRhYnMgITogUXVlcnlMaXN0PFRhYkNvbXBvbmVudD47XG4gIEBDb250ZW50Q2hpbGQoVGFiTGlzdENvbXBvbmVudCwgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSB0YWJMaXN0ICE6IFRhYkxpc3RDb21wb25lbnQ7XG4gIEBDb250ZW50Q2hpbGRyZW4oVGFiQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pIHByaXZhdGUgdGFicyAhOiBRdWVyeUxpc3Q8VGFiQ29tcG9uZW50PjtcbiAgQENvbnRlbnRDaGlsZHJlbihUYWJQYW5lQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0pIHByaXZhdGUgcGFuZXMgITogUXVlcnlMaXN0PFRhYlBhbmVDb21wb25lbnQ+O1xuXG4gIHByaXZhdGUgaG9zdDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGhvc3RFbGVtZW50OiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIHRhYnNldFNlcnZpY2U6IFRhYnNldFNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5ob3N0ID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmJveGVkID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmhvc3QsIGBuYXYtdGFicy1ib3hlZC0ke3RoaXMuYm94ZWR9YCk7XG4gICAgfVxuICAgIHRoaXMuYWN0aXZlVGFiU3Vic2NyaWJlKCk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLmFjdGl2ZVRhYlVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgLy8gdGhpcy50YWJMaXN0ID0gT2JqZWN0LmFzc2lnbih0aGlzLnRhYkxpc3QsIHRoaXMudmFyaWFudCwgdGhpcy52ZXJ0aWNhbCwgdGhpcy5maWxsLCB0aGlzLmp1c3RpZmllZCk7XG4gICAgdGhpcy50YWJMaXN0LnZhcmlhbnQgPSB0aGlzLnZhcmlhbnQ7XG4gICAgdGhpcy50YWJMaXN0LnZlcnRpY2FsID0gdGhpcy52ZXJ0aWNhbDtcbiAgICB0aGlzLnRhYkxpc3QuZmlsbCA9IHRoaXMuZmlsbDtcbiAgICB0aGlzLnRhYkxpc3QuanVzdGlmaWVkID0gdGhpcy5qdXN0aWZpZWQ7XG4gICAgdGhpcy5fdGFic0FycmF5ID0gdGhpcy50YWJzLnRvQXJyYXkoKTtcbiAgICBpZiAodGhpcy50YWJzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fc2VsZWN0ZWRUYWIgPSB0aGlzLnRhYnMubGVuZ3RoIC0gMSA8IHRoaXMuYWN0aXZlVGFiID8gdGhpcy50YWJzLmZpcnN0IDogdGhpcy5fdGFic0FycmF5W3RoaXMuYWN0aXZlVGFiXTtcbiAgICB9XG4gICAgdGhpcy50YWJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBpdGVtLmluZGV4S2V5ID0gaW5kZXg7XG4gICAgfSk7XG4gICAgdGhpcy5wYW5lcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgaXRlbS5pbmRleEtleSA9IGluZGV4O1xuICAgIH0pO1xuICAgIHRoaXMudGFic2V0U2VydmljZS5zZXRBY3RpdmVUYWIodGhpcy5fc2VsZWN0ZWRUYWIpO1xuICAgIHRoaXMuc2V0QWN0aXZlVGFiKHRoaXMuX3NlbGVjdGVkVGFiKTtcbiAgfVxuXG4gIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcblxuICB9XG5cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgLy8gY29uc29sZS5sb2coJ3RhYnNldCBuZ09uQ2hhbmdlcycsIGNoYW5nZXMsIHRoaXMuYWN0aXZlVGFiKTtcbiAgICAvLyB0aGlzLmFjdGl2ZVRhYiA9IGNoYW5nZXMuYWN0aXZlVGFiLmN1cnJlbnRWYWx1ZTtcbiAgfVxuXG4gIHNldEFjdGl2ZVRhYih0YWI6IFRhYkNvbXBvbmVudCA9IHRoaXMuX3NlbGVjdGVkVGFiKSB7XG4gICAgdGhpcy5hY3RpdmVUYWIgPSB0YWIuaW5kZXhLZXk7XG4gICAgLy8gY29uc29sZS5sb2coJ3NldEFjdGl2ZVRhYicsIHRoaXMuYWN0aXZlVGFiLCB0YWIuaW5kZXhLZXkpXG4gICAgaWYgKCF0YWIuZGlzYWJsZWQpIHtcbiAgICAgIHRhYi5hY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy50YWJzZXRTZXJ2aWNlLnNldEFjdGl2ZVRhYih0YWIpO1xuICAgICAgdGhpcy5hY3RpdmVUYWJDaGFuZ2UuZW1pdCh0aGlzLmFjdGl2ZVRhYik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhY3RpdmVUYWJTdWJzY3JpYmUoKSB7XG4gICAgdGhpcy5hY3RpdmVUYWJTdWJzY3JpcHRpb24gPSB0aGlzLnRhYnNldFNlcnZpY2UuYWN0aXZlVGFiJC5zdWJzY3JpYmUoKGFjdGl2ZVRhYikgPT4ge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2FjdGl2ZVRhYlN1YnNjcmlwdGlvbicsIGFjdGl2ZVRhYik7XG4gICAgICAvLyB0aGlzLnNldEFjdGl2ZVRhYihhY3RpdmVUYWIpO1xuICAgIH0pO1xuICB9XG4gIHByaXZhdGUgYWN0aXZlVGFiVW5zdWJzY3JpYmUoKSB7XG4gICAgdGhpcy5hY3RpdmVUYWJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfVxufVxuIl19