!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("chart.js")):"function"==typeof define&&define.amd?define("ng-chartjs",["exports","@angular/core","chart.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ng-chartjs"]={},t.ng.core,t.chart_js)}(this,(function(t,e,r){"use strict";function a(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,Object.freeze(e)}var n=a(r),o=function(){function t(){this._chartInstances=[],this._chartId=[]}return t.prototype.addChart=function(t,e){for(var r=0;r<this._chartId.length;r++)if(t===this._chartId[r])return;this._chartId.push(t),this._chartInstances.push(e)},t.prototype.removeChart=function(t){for(var e=0;e<this._chartId.length;e++)t===this._chartId[e]&&(this._chartId.splice(e,1),this._chartInstances.splice(e,1))},t.prototype.getChart=function(t){for(var e=0;e<this._chartId.length;e++)if(t===this._chartId[e])return this._chartInstances[e];return null},t}();o.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new o},token:o,providedIn:"root"}),o.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}];var i=function(){this.plugins=[]};i.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new i},token:i,providedIn:"root"}),i.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}];var s=function(){function t(t,e){this.storeService=t,this.pluginConfig=e;var a=e.plugins;if(0!==a.length||a)for(var n=0;n<a.length;n++)a[n]&&r.plugins.register(a[n])}return t.prototype.getChart=function(t){return this.storeService.getChart(t)},t}();s.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new s(e.ɵɵinject(o),e.ɵɵinject(i))},token:s,providedIn:"root"}),s.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],s.ctorParameters=function(){return[{type:o},{type:i}]};var h=[[63,81,181],[0,150,136],[255,152,0],[233,30,99],[156,39,176],[0,188,212],[3,169,244],[96,125,139],[255,193,7],[37,155,36],[205,220,57],[86,119,252]];function u(t,e){return"rgba("+t.concat(e).join(",")+")"}function c(t,e){return Math.floor(Math.random()*(e-t+1))+t}function d(t){return{backgroundColor:u(t,.35),borderColor:u(t,1),pointBackgroundColor:u(t,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:u(t,.95)}}function l(t){return{backgroundColor:u(t,.75),borderColor:u(t,1),hoverBackgroundColor:u(t,1),hoverBorderColor:u(t,1)}}function p(t){return{backgroundColor:t.map((function(t){return u(t,.76)})),borderColor:t.map((function(){return"#fff"})),pointBackgroundColor:t.map((function(t){return u(t,1)})),pointBorderColor:t.map((function(){return"#fff"})),pointHoverBackgroundColor:t.map((function(t){return u(t,1)})),pointHoverBorderColor:t.map((function(t){return u(t,1)}))}}function f(t){return{backgroundColor:t.map((function(t){return u(t,.75)})),borderColor:t.map((function(t){return u(t,1)})),hoverBackgroundColor:t.map((function(t){return u(t,1)})),hoverBorderColor:t.map((function(t){return u(t,1)}))}}function g(){return[c(0,255),c(0,255),c(0,255)]}function v(t){return h[t]||g()}function y(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=h[r]||g();return e}function C(t,e,r){return"pie"===t||"doughnut"===t||"bubble"===t||"scatter"===t?p(y(r)):"polarArea"===t?f(y(r)):"line"===t||"radar"===t?d(v(e)):"bar"===t||"horizontalBar"===t?l(v(e)):v(e)}var b=function(){function t(t,r,a,n){this.ngChartjsService=r,this.storeService=a,this.zone=n,this.labels=[],this.options={},this.noZone=!0,this.id=null,this.chartClick=new e.EventEmitter,this.chartHover=new e.EventEmitter,this.initFlag=!1,this.hasChanges=!1,this.element=t}return t.prototype.ngOnInit=function(){var t=this;this.ctx=this.element.nativeElement.getContext("2d"),this.initFlag=!0,(this.data||this.datasets)&&(this.noZone?this.zone.runOutsideAngular((function(){t.refresh()})):this.refresh())},t.prototype.ngOnChanges=function(t){this.initFlag&&((t.hasOwnProperty("data")||t.hasOwnProperty("datasets"))&&(t.data?this.updateChartData(t.data.currentValue):this.updateChartData(t.datasets.currentValue),this.hasChanges=!0),t.hasOwnProperty("labels")&&(this.chart.data.labels=t.labels.currentValue,this.hasChanges=!0),t.hasOwnProperty("legend")&&t.legend.currentValue!==t.legend.previousValue&&(this.chart.options.legend.display=t.legend.currentValue,this.hasChanges=!0),t.hasOwnProperty("adding")&&(this.addData_(t.adding.currentValue.labels,t.adding.currentValue.data),this.hasChanges=!0),t.hasOwnProperty("removing")&&("oldest"!==t.removing.currentValue.orientation&&"latest"!==t.removing.currentValue.orientation||(this.removeData_(t.removing.currentValue.orientation),this.hasChanges=!0)),t.hasOwnProperty("chartType")&&this.refresh(),t.hasOwnProperty("resetOption")&&(Object.assign(this.chart.options,t.resetOption.currentValue),this.hasChanges=!0),this.hasChanges&&(this.chart.update(),this.hasChanges=!1),t.hasOwnProperty("id")&&(this.removeChart(t.id.previousValue),this.addChart(t.id.currentValue)))},t.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.chart=void 0,this.removeChart(this.id))},t.prototype.update=function(){this.chart.update()},t.prototype.addData=function(t,e){this.addData_(t,e),this.update()},t.prototype.removeData=function(t){this.removeData_(t),this.update()},t.prototype.refresh=function(){this.ngOnDestroy(),this.chart=this.getChartBuilder(this.ctx),this.addChart(this.id)},t.prototype.removeChart=function(t){this.element.nativeElement.hasAttribute("id")?this.storeService.removeChart(this.element.nativeElement.id):null!=t&&this.storeService.removeChart(t)},t.prototype.addChart=function(t){this.element.nativeElement.hasAttribute("id")?this.storeService.addChart(this.element.nativeElement.id,this.chart):null!=t&&this.storeService.addChart(t,this.chart)},t.prototype.updateChartData=function(t){Array.isArray(t[0].data)?this.chart.data.datasets.forEach((function(e,r){e.data=t[r].data,t[r].label&&(e.label=t[r].label)})):this.chart.data.datasets[0].data=t,this.chart.data.datasets=this.updateColors(this.chart.data.datasets)},t.prototype.getChartBuilder=function(t){var e=this,r=this.getDatasets(),a=Object.assign({},this.options);!1===this.legend&&(a.legend={display:!1}),a.hover=a.hover||{},a.hover.onHover||(a.hover.onHover=function(t,r){r&&!r.length||e.chartHover.emit({event:t,active:r})}),a.onClick||(a.onClick=function(t,r){e.chartClick.emit({event:t,active:r})});var o={type:this.chartType,data:{labels:this.labels,datasets:r},options:a,plugins:this.inlinePlugins};return new n(t,o)},t.prototype.getDatasets=function(){var t=this,e=void 0;if((!this.datasets||!this.datasets.length&&this.data&&this.data.length)&&(e=Array.isArray(this.data[0])?this.data.map((function(e,r){return{data:e,label:t.labels[r]||"Label "+r}})):[{data:this.data,label:"Label 0"}]),!(e=this.updateColors(e)))throw new Error("ng-chartjs configuration error,\n      data or datasets field are required to render char "+this.chartType);return e},t.prototype.updateColors=function(t){var e=this;return(this.datasets&&this.datasets.length||t&&t.length)&&(t=(this.datasets||t).map((function(t,r){var a=Object.assign({},t);return e.colors&&e.colors.length?Object.assign(a,e.colors[r]):Object.assign(a,C(e.chartType,r,a.data.length)),a}))),t},t.prototype.addData_=function(t,e){var r=this;0!==t.length&&0!==e.length&&(t.forEach((function(t){r.chart.data.labels.push(t)})),this.chart.data.datasets.forEach((function(t,r){if(e[r])for(var a=0;a<e[r].length;a++)t.data.push(e[r][a]);else console.log("The added data does not match the original data")})))},t.prototype.removeData_=function(t){"latest"===t?(this.chart.data.labels.pop(),this.chart.data.datasets.forEach((function(t){t.data.pop()}))):"oldest"===t&&(this.chart.data.labels.shift(),this.chart.data.datasets.forEach((function(t){t.data.shift()})))},t}();b.decorators=[{type:e.Directive,args:[{selector:"canvas[ngChartjs]",exportAs:"ngChartjs"}]}],b.ctorParameters=function(){return[{type:e.ElementRef},{type:s},{type:o},{type:e.NgZone}]},b.propDecorators={data:[{type:e.Input}],datasets:[{type:e.Input}],labels:[{type:e.Input}],options:[{type:e.Input}],inlinePlugins:[{type:e.Input}],chartType:[{type:e.Input}],colors:[{type:e.Input}],legend:[{type:e.Input}],adding:[{type:e.Input}],removing:[{type:e.Input}],resetOption:[{type:e.Input}],noZone:[{type:e.Input}],id:[{type:e.Input}],chartClick:[{type:e.Output}],chartHover:[{type:e.Output}]};var m=new e.InjectionToken("[ngx-chart-js] Global Default Plugin");function I(t){var e=new i;return e.plugins=t,e}var j=function(){function t(){}return t.registerPlugin=function(e){return void 0===e&&(e=[]),{ngModule:t,providers:[{provide:m,useValue:e},{deps:[m],provide:i,useFactory:I}]}},t}();j.decorators=[{type:e.NgModule,args:[{imports:[],declarations:[b],exports:[b],providers:[s]}]}],t.DefaultColors=h,t.NgChartjsDirective=b,t.NgChartjsModule=j,t.NgChartjsService=s,t.formatBarColor=l,t.formatLineColor=d,t.formatPieColors=p,t.formatPolarAreaColors=f,t.generateColor=v,t.generateColors=y,t.getColors=C,t.getRandomColor=g,t.getRandomInt=c,t.ngChartjsCustomPluginsFactory=I,t.rgba=u,t.ɵa=o,t.ɵb=i,t.ɵc=m,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-chartjs.umd.min.js.map